# Функционал отзывов и сортировки

## Обзор изменений

Добавлен функционал получения количества отзывов для товаров с Ozon и Wildberries, а также возможность сортировки результатов.

## Новые возможности

### 1. Получение отзывов
- **Ozon**: Добавлен селектор `.tsBodyControl400Small` для получения информации об отзывах
- **Wildberries**: Добавлен селектор `.product-card__rating` для получения рейтинга и отзывов

### 2. Обработка отзывов
- Функция `extractReviewsCount()` в `formatting.js` извлекает числовое значение отзывов из текста
- Поддерживает различные форматы: "123 отзыва", "1 отзыв", "отзывы (456)", "456"

### 3. Сортировка
Добавлены три типа сортировки:
- **По отзывам** (`reviews`) - по убыванию количества отзывов (по умолчанию)
- **По цене** (`price`) - по возрастанию цены
- **По названию** (`name`) - по алфавиту

## API

### GET /get-products
```
GET /get-products?search=телефон&sortBy=reviews
```

**Параметры:**
- `search` (обязательный) - поисковый запрос
- `sortBy` (опциональный) - тип сортировки: `reviews`, `price`, `name`

**Примеры:**
```bash
# Сортировка по отзывам (по умолчанию)
GET /get-products?search=телефон

# Сортировка по цене
GET /get-products?search=телефон&sortBy=price

# Сортировка по названию
GET /get-products?search=телефон&sortBy=name
```

## Структура ответа

Каждый товар теперь содержит поле `reviewsCount`:

```json
{
  "name": "Название товара",
  "price": 15000,
  "sale": 12000,
  "marketplace": "ozon",
  "cardLink": "https://...",
  "cardImg": "https://...",
  "reviewsCount": 123
}
```

## Фронтенд

### Компонент поиска
Добавлен селектор для выбора типа сортировки:
- По отзывам
- По цене  
- По названию

### Компонент товаров
Добавлено отображение количества отзывов для каждого товара.

## Тестирование

Для тестирования функционала запустите:
```bash
node test-reviews.js
```

Этот скрипт проверит:
- Получение товаров с отзывами
- Сортировку по отзывам
- Сортировку по цене
- Отображение результатов в консоли

## Запуск

1. Запустите сервер:
```bash
cd server
npm start
```

2. Запустите фронтенд:
```bash
cd front
npm run dev
```

3. Откройте браузер и протестируйте новый функционал сортировки.
