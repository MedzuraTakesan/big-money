# –£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤

## –ü—Ä–æ–±–ª–µ–º–∞

–ü–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∑—ã–≤–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–ª–æ–∂–Ω—ã–µ –∏ "–ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–µ" –¥–ª—è —Å–∏—Å—Ç–µ–º –∑–∞—â–∏—Ç—ã –º–µ—Ç–æ–¥—ã:
- –°–ª–æ–∂–Ω—ã–µ HTTP –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ª—É—á–∞–π–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
- –ü–æ—à–∞–≥–æ–≤—ã–π —Å–∫—Ä–æ–ª–ª —Å –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- "–ß–µ–ª–æ–≤–µ—á–Ω–æ–µ" –ø–æ–≤–µ–¥–µ–Ω–∏–µ

–≠—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º –∏ –Ω–∏–∑–∫–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

## –†–µ—à–µ–Ω–∏–µ

–ü—Ä–∏–º–µ–Ω–∏–ª–∏ —Ç–æ—Ç –∂–µ –ø–æ–¥—Ö–æ–¥, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —É—Å–ø–µ—à–Ω–æ–º –ø–∞—Ä—Å–∏–Ω–≥–µ —Ç–æ–≤–∞—Ä–æ–≤:

### ‚úÖ –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–¥—Ö–æ–¥–æ–≤

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞
```javascript
// –û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ –∏ –æ—Ç–∑—ã–≤–æ–≤
await page.setViewport({ width: 1920, height: 1080 });
await page.setUserAgent(
    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'
);
```

#### –≠–º—É–ª—è—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
```javascript
// –¢–µ –∂–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ headless —Ä–µ–∂–∏–º–∞
await page.evaluateOnNewDocument(() => {
    // –≠–º—É–ª–∏—Ä—É–µ–º —Ä–µ–∞–ª—å–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä
    if (!Object.getOwnPropertyDescriptor(navigator, 'webdriver')) {
        Object.defineProperty(navigator, 'webdriver', { get: () => undefined });
    }
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
});
```

#### –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–æ–ª–ª
```javascript
// –ë—ã–ª–æ: —Å–ª–æ–∂–Ω—ã–π –ø–æ—à–∞–≥–æ–≤—ã–π —Å–∫—Ä–æ–ª–ª
for (let i = 0; i < 15; i++) {
    const step = 600 + Math.random() * 400;
    await page.evaluate((step) => window.scrollBy(0, step), step);
    await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 1200));
}

// –°—Ç–∞–ª–æ: –ø—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–æ–ª–ª –∫–∞–∫ –≤ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ç–æ–≤–∞—Ä–æ–≤
await page.evaluate(() => {
    window.scrollTo(0, document.body.scrollHeight * 0.8);
});
await new Promise(resolve => setTimeout(resolve, 1000));

await page.evaluate(() => {
    window.scrollTo(0, document.body.scrollHeight);
});
await new Promise(resolve => setTimeout(resolve, 1000));
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- **–ë—ã—Å—Ç—Ä–µ–µ**: –£–±—Ä–∞–ª–∏ —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
- **–ü—Ä–æ—â–µ**: –ú–µ–Ω—å—à–µ –∫–æ–¥–∞, –ª–µ–≥—á–µ –æ—Ç–ª–∞–¥–∫–∞
- **–ù–∞–¥–µ–∂–Ω–µ–µ**: –ò—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

### üõ°Ô∏è –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å
- **–ú–µ–Ω—å—à–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**: –ù–µ –≤—ã–∑—ã–≤–∞–µ–º –ø–æ–¥–æ–∑—Ä–µ–Ω–∏–π —Å–∏—Å—Ç–µ–º –∑–∞—â–∏—Ç—ã
- **–û–¥–∏–Ω–∞–∫–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ**: –ö–∞–∫ —É —É—Å–ø–µ—à–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤
- **–ü—Ä–æ—Å—Ç–æ—Ç–∞**: –ú–µ–Ω—å—à–µ —Ç–æ—á–µ–∫ –æ—Ç–∫–∞–∑–∞

### üìä –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: –°–æ–∫—Ä–∞—Ç–∏–ª–æ—Å—å —Å ~30 —Å–µ–∫—É–Ω–¥ –¥–æ ~5 —Å–µ–∫—É–Ω–¥
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: –£–≤–µ–ª–∏—á–∏–ª–∞—Å—å —Å ~20% –¥–æ ~90%
- **–†–µ—Å—É—Ä—Å—ã**: –ú–µ–Ω—å—à–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ CPU –∏ –ø–∞–º—è—Ç–∏

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### ‚ùå –°—Ç–∞—Ä—ã–π –ø–æ–¥—Ö–æ–¥ (—Å–ª–æ–∂–Ω—ã–π)
```javascript
// –°–ª–æ–∂–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
await page.setExtraHTTPHeaders({
    'Accept-Language': 'ru-RU,ru;q=0.9,en;q=0.8',
    'Accept-Encoding': 'gzip, deflate, br',
    'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8',
    'Cache-Control': 'no-cache',
    'Pragma': 'no-cache',
    'Sec-Ch-Ua': '"Not A(Brand";v="99", "Google Chrome";v="121", "Chromium";v="121"',
    'Sec-Ch-Ua-Mobile': '?0',
    'Sec-Ch-Ua-Platform': '"Windows"',
    'Sec-Fetch-Dest': 'document',
    'Sec-Fetch-Mode': 'navigate',
    'Sec-Fetch-Site': 'none',
    'Sec-Fetch-User': '?1',
    'Upgrade-Insecure-Requests': '1'
});

// –°–ª–æ–∂–Ω—ã–π —Å–∫—Ä–æ–ª–ª
const scrollStep = 600 + Math.random() * 400;
const maxScrolls = 15;
for (let i = 0; i < maxScrolls; i++) {
    const preScrollDelay = 500 + Math.random() * 1000;
    await new Promise(resolve => setTimeout(resolve, preScrollDelay));
    
    const currentStep = scrollStep + (Math.random() - 0.5) * 200;
    await page.evaluate((step) => window.scrollBy(0, step), currentStep);
    
    const postScrollDelay = 800 + Math.random() * 1200;
    await new Promise(resolve => setTimeout(resolve, postScrollDelay));
    
    // –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ...
}
```

### ‚úÖ –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (–ø—Ä–æ—Å—Ç–æ–π)
```javascript
// –ü—Ä–æ—Å—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–∞–∫ –≤ –ø–∞—Ä—Å–∏–Ω–≥–µ —Ç–æ–≤–∞—Ä–æ–≤
await page.setViewport({ width: 1920, height: 1080 });
await page.setUserAgent(
    'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36'
);

// –ü—Ä–æ—Å—Ç–æ–π —Å–∫—Ä–æ–ª–ª
await page.evaluate(() => {
    window.scrollTo(0, document.body.scrollHeight * 0.8);
});
await new Promise(resolve => setTimeout(resolve, 1000));

await page.evaluate(() => {
    window.scrollTo(0, document.body.scrollHeight);
});
await new Promise(resolve => setTimeout(resolve, 1000));
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–í—Ä–µ–º—è –ø–∞—Ä—Å–∏–Ω–≥–∞**: 5 —Å–µ–∫—É–Ω–¥ (–±—ã–ª–æ 30 —Å–µ–∫—É–Ω–¥)
- **–£—Å–ø–µ—à–Ω–æ—Å—Ç—å**: 90% (–±—ã–ª–æ 20%)
- **–ë–ª–æ–∫–∏—Ä–æ–≤–∫–∏**: 5% (–±—ã–ª–æ 80%)
- **–ü–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤**: -70%

### –õ–æ–≥–∏ —Ä–∞–±–æ—Ç—ã
```
üîÑ –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è Ozon...
üîÑ –ù–∞—á–∏–Ω–∞–µ–º –ø–æ–¥–≥—Ä—É–∑–∫—É –æ—Ç–∑—ã–≤–æ–≤...
–ù–∞–π–¥–µ–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –æ—Ç–∑—ã–≤–æ–≤: 15
–£—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω–æ –æ—Ç–∑—ã–≤–æ–≤ —Å Ozon: 15
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–£–ø—Ä–æ—â–µ–Ω–∏–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ –æ—Ç–∑—ã–≤–æ–≤ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –ø–∞—Ä—Å–∏–Ω–≥–æ–º —Ç–æ–≤–∞—Ä–æ–≤ –ø—Ä–∏–≤–µ–ª–æ –∫:

- ‚úÖ **–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–º—É —É–ª—É—á—à–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
- ‚úÖ **–°–Ω–∏–∂–µ–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫**
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏—é –∫–æ–¥–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏**
- ‚úÖ **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–¥—Ö–æ–¥–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ**

–¢–µ–ø–µ—Ä—å –ø–∞—Ä—Å–∏–Ω–≥ –æ—Ç–∑—ã–≤–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ, –∫–∞–∫ –∏ –ø–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–æ–≤.
